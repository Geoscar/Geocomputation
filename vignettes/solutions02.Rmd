---
title: "Chapter 2: Geographic data in R"
author: "Robin Lovelace, Jakub Nowosad, Jannes Muenchow"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{geocompr-solutions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, echo = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```

## Prerequisites {-}

The solutions assume the following packages are attached (other packages will be attached when needed):

```{r packages, message=FALSE, warning=FALSE}
library(sf)
library(tidyverse)
library(raster)
library(spData)
```

# Chapter 2

<!-- vector exercises -->
1. What does the summary of the `geometry` column tell us about the `world` dataset, in terms of:
    - The geometry type?
    - How many countries there are?
    - The coordinate reference system (CRS)?
    
```{r}
summary(st_geometry(world))
```

The geometry type: `MULTIPOLYGON`. 
Number of objects (countries): 177
The coordinate reference system (CRS): WGS84 (EPSG 4326)

2. Using **sf**'s `plot()` command, create a map of Nigeria in context, building on the code that creates and plots Asia above (see section https://geocompr.robinlovelace.net/spatial-class.html#basic-map).
    - Hint: this used the `lwd`, `main` and `col` arguments of `plot()`. 
    - Bonus: make the country boundaries a dotted grey line.
    - Hint: `border` is an additional argument of `plot()` for **sf**  objects.

```{r nigeria, warning=FALSE, fig.cap="Map of Nigeria in context illustrating sf's plotting capabilities"}
nigeria = world[world$name_long == "Nigeria", ]
africa = world[world$continent == "Africa", ]
bb_africa = st_bbox(africa)
plot(st_geometry(africa), col = "white", lwd = 3, main = "Nigeria in context", border = "lightgrey")
plot(st_geometry(world), lty = 3, add = TRUE, border = "grey")
plot(st_geometry(nigeria), col = "yellow", add = TRUE, border = "darkgrey")
ncentre = st_centroid(nigeria)
ncentre_num = st_coordinates(ncentre)
text(x = ncentre_num[1], y = ncentre_num[2], labels = "Nigeria")
```

3. What does the `cex` argument do in the `plot()` function that generates this [Figure](https://geocompr.robinlovelace.net/spatial-class.html#fig:contpop)?
    - Why was `cex` set to the `sqrt(world$pop) / 10000` instead of just the population directly?
    - Bonus: what equivalent arguments to `cex` exist in the dedicated visualization package **tmap**?
    
4. Re-run the code that 'generated' this [Figure](https://geocompr.robinlovelace.net/spatial-class.html#fig:contpop) at the end of this [section](https://geocompr.robinlovelace.net/spatial-class.html#base-args) and find 3 similarities and 3 differences between the plot produced on your computer and that in the book.
    - What is similar?
    - What has changed?
    - Bonus: play around with and research base plotting arguments to make your version of this [Figure](https://geocompr.robinlovelace.net/spatial-class.html#fig:contpop) more attractive. Which arguments were most useful?
    - Advanced: try to reproduce the map presented in this [section](https://geocompr.robinlovelace.net/spatial-class.html#base-args). Copy-and-pasting is prohibited!

<!-- raster exercises -->
5. Read the `raster/nlcd2011.tif` file from the **spDataLarge** package. 
What kind of information can you get about the properties of this file?

```{r}
nlcd = raster(system.file("raster/nlcd2011.tif", package = "spDataLarge"))
nlcd
```

You can get information about:
- dimensions - a number of rows (`nrow`), a number of columns (`ncol`), a total number of cells (`ncell`)
- resolution - x and y resolution in the map units
- spatial extent of the dataset - `xmin`, `xmax`, `ymin`, `ymax`
- coordinate reference system
- range of values - `min` and `max`

6. Create an empty `RasterLayer` object called `my_raster` with 10 columns and 10 rows, and resolution of 10 units.
Assign random values between 0 and 10 to the new raster and plot it.
<!-- crs exercises -->
<!-- 1. pros and cons of the projection types -->
<!-- 1. what's the difference between vector and raster transformation -->
<!-- units exercises -->
<!-- 1. ?? -->
